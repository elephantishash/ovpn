{% load static %}
{% get_static_prefix as STATIC_PREFIX %}
<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  </head>
</head>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous">
</script>

<body class="container mt-3 mb-3">
	<ul class="nav nav-tabs nav-fill">
	  <li class="nav-item">
	    <a class="nav-link" aria-current="page" href="{% url 'superadmin:home' %}">Home</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link active" href="{% url 'superadmin:manage' %}">Mange</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link text-danger" href="{% url 'logout' %}">Log Out</a>
	  </li>
	</ul>
	<br>

	<p>There is account list of  <i class="fs-5 text-success">{{ profile.user.username }}</i></p>
	<p class="text-muted">your current server ip is {{ profile.server.ir_ip }}</p>
	<form action="{% url 'superadmin:change_server' profile.id %}" method="post">
		{% csrf_token %}
		<div class="input-group">
		  <select class="form-select" name="server_shift" id="inputGroupSelect04" aria-label="Example select with button addon">
		    <option selected>{{ profile.server }}</option>
		    {% for server in servers %}
		    	{% if server != profile.server %}
		    		<option value="{{ server }}">{{ server }}</option>
		    	{% endif %}
		    	}
		    {% endfor %}
		  </select>
		  <button class="btn btn-outline-secondary" type="submit">Change</button>
		</div>
	</form>
	<br>
	
	{% if accounts %}
		<ul class="list-group list-group-numbered">
			{% for account in accounts %}
				<li class="list-group-item">
					<a href="" data-bs-toggle="modal" data-bs-target="#exampleModal{{ account.id }}" class="text-decoration-none ">{{ account }}</a>
				<span class="float-end text-muted fw-light">{{ account.date_end|timeuntil }}</span>
				</li>
			{% endfor %}
		</ul>
		{% for account in accounts %}
			<!--modal-->
			<div class="modal fade" id="exampleModal{{ account.id }}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
				    <div class="modal-content">
				    	<div class="modal-header">
					        <h1 class="modal-title float-center fs-5" id="exampleModalLabel"><h5 class="">{{ account }}</h5></h1>
					        <button type="button" class="btn-close float-end" data-bs-dismiss="modal" aria-label="Close"></button>
				    	</div>
				    	<div class="modal-body">
					        <div class="">
							    
							    <p class=""><i class="text-muted fs-6">password: </i>{{ account.password }}</p>
							    <p class="text-muted">{{ account.server }} > {{ account.server.ir_ip }}</p>
							    <p class="float-start">{{ account.date_end|timeuntil }} left</p>

							</div>
				    	</div>
				    	<div class="modal-footer">
				    		<a class="btn btn-outline-success" href="{% url 'account:charge_account' account.id %}">Charge 1 month</a>
				    		<a class="btn btn-primary" href="{{ account.file.url }}">Download OVPN file</a>

				    	</div>
				    </div>
				</div>
			</div>
		{% endfor %}
	{% else %}
		<br>
		<div class="alert alert-secondary" role="alert">
		  You have not created an account yet
		</div>
	{% endif %}
</body>
<footer class="bd-footer py-10 mt-5">
	
</footer>